<!DOCTYPE html><html><head><title>ç« ç¯€æŒ‘æˆ° - æŒ‘æˆ°ç‰ˆ</title><meta name="viewport" content="width=device-width, initial-scale=1"><link href="images/favicon.ico" rel="shortcut icon"><meta charset="UTF-8"><script src="/javascripts/vendor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.2/vue.global.js"></script></head><body class="bg-lighter">
<div class="container main my-3"><div class="row"><main class="col post">
<!-- ç« ç¯€æ¨™é¡Œ --><div class="mb-4"><h1 class="mt-0 text-muted">ç« ç¯€æŒ‘æˆ° - æŒ‘æˆ°ç‰ˆ</h1></div>
<!-- ğŸ”¥ğŸ”¥ç·´ç¿’é–‹å§‹ğŸ”¥ğŸ”¥ -->

<div id="app">
  <div class="container gx-2">
    <div class="row gx-3 bg-light py-3">
      <div class="col-md-3">
        <div class="list-group" v-for="item in products">
          <a href="#" class="list-group-item list-group-item-action" @click="selectDrinks(item)">
            <h6 class="card-title mb-1"> {{ item.name }} </h6>
            <div class="d-flex align-items-center justify-content-between">
              <p class="mb-0"><small> {{ item.engName }} </small></p>
              <p class="mb-0"><small>NT$  {{ item.price }} </small></p>
            </div>
          </a>
        </div>
      </div>
      <div class="col-md-9">
        <div class="card mb-2">
          <div class="position-absolute text-white d-flex align-items-center justify-content-center" style="top: 0;bottom: 0;left: 0;right: 0;background-color: rgba(0, 0, 0, 0.65); z-index: 100;" v-if="darkZone">è«‹å…ˆé¸æ“‡é£²å“</div>
          <div class="card-body px-4">
            <div class="mb-3">
              <h4> {{ temp.name }} </h4>
            </div>
            <div class="mb-3">
              <label for="productNum" class="form-label">æ•¸é‡</label>
              <input type="number" class="form-control" id="productNum" placeholder="æ•¸é‡" min="0" :value="temp.number" v-model.number="temp.number">
            </div>
            <div class="mb-3">
              <label for="productNum" class="form-label d-block">å†°å¡Š*</label>
              <div class="form-check form-check-inline" v-for="(ice, key) in iceType" :key=" 'ice' + key">
                <input class="form-check-input" name="iceType" type="radio" :id="ice" :value="ice" v-model="temp.ice" :disabled="temp.ice == temp.defaultIce">
                <label class="form-check-label" :for="ice"> {{ ice }} </label>
              </div>
            </div>
            <div class="mb-3">
              <label for="productNum" class="form-label d-block">ç”œåº¦*</label>
              <div class="form-check form-check-inline" v-for="(sugar, key) in sugarType" :key=" 'sugar' + key">
                <input class="form-check-input" name="sugarType" type="radio" :id="sugar" :value="sugar" v-model="temp.sugar" :disabled="temp.sugar == temp.defaultSugar">
                <label class="form-check-label" :for="sugar"> {{ sugar }} </label>
              </div>
            </div>
            <div class="mb-3">
              <label for="productNum" class="form-label d-block">åŠ æ–™</label>
              <div class="form-check form-check-inline" v-for="(toppings, key) in toppingsType" :key=" 'toppings' + key">
                <input class="form-check-input" type="checkbox" :id="toppings" :value="toppings" v-model="temp.toppings" :disabled="toppings == temp.defaultToppings">
                <label class="form-check-label" :for="toppings"> {{ toppings }} </label>
              </div>
            </div>
            <div class="mb-3">
              <label for="productNotice" class="form-label">å‚™è¨»</label>
              <textarea class="form-control" id="productNotice" rows="2" v-model="temp.note"></textarea>
            </div>
            <div class="d-flex gap-2">
              <button class="btn btn-outline-primary w-100" type="button" @click="cancelBtn">å–æ¶ˆ</button>
              <button class="btn btn-primary w-100" type="button" @click="submitBtn(temp)">åŠ å…¥</button>
            </div>
          </div>
        </div>
        <div class="card" v-if="hasOrder">
          <div class="card-body">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">å“é …</th>
                  <th scope="col">å†°å¡Š</th>
                  <th scope="col">ç”œåº¦</th>
                  <th scope="col">åŠ æ–™</th>
                  <th scope="col">å–®åƒ¹</th>
                  <th scope="col">æ•¸é‡</th>
                  <th scope="col">å°è¨ˆ</th>
                  <th scope="col">ä¿®æ”¹</th>
                  <th scope="col">åˆªé™¤</th>
                </tr>
              </thead>
              <tbody>
                <template v-for="(item, key) in orderList" :key=" 'item' + key ">
                  <tr>
                    <th scope="row"> {{ item.name }} <br>
                      <small class="text-muted fw-normal">å‚™è¨»ï¼š{{ item.note }}</small>
                    </th>
                    <td> {{ item.ice }} </td>
                    <td> {{ item.sugar }} </td>
                    <td> {{ item.toppings.join('ã€') }} </td>
                    <td> {{ item.salesPrice }} </td>
                    <td> {{ item.number }} </td>
                    <td class="text-end"> {{ item.sum }} </td>
                    <td><button type="button" class="btn btn-primary btn-sm" @click="modifyBtn(item)">ä¿®æ”¹</button></td>
                    <td><button type="button" class="btn btn-danger btn-sm" @click="deleteBtn(item)">åˆªé™¤</button></td>
                  </tr>
                </template>
              </tbody>
            </table>
            <p class="text-end">å…± NT$ {{ orderTotal }} å…ƒ</p>
            <button class="btn btn-sm btn-secondary w-100">ç”¢ç”Ÿè¨‚å–®</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="bg-light p-3 mt-3">
    <div class="bg-white p-3 d-flex flex-column" style="min-height: 450px;">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">å“é …</th>
            <th scope="col">å†°å¡Š</th>
            <th scope="col">ç”œåº¦</th>
            <th scope="col">åŠ æ–™</th>
            <th scope="col">å–®åƒ¹</th>
            <th scope="col">æ•¸é‡</th>
            <th scope="col">å°è¨ˆ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">çç é®®å¥¶èŒ¶<br>
              <small class="text-muted fw-normal">å‚™è¨»ï¼šé˜¿å§¨ï¼Œæˆ‘ä¸æƒ³åŠªåŠ›äº†</small>
            </th>
            <td>æ­£å¸¸å†°</td>
            <td>å…¨ç³–</td>
            <td>æ¤°æœ</td>
            <td>70</td>
            <td>1</td>
            <td class="text-end">70</td>
          </tr>
        </tbody>
      </table>
      <p class="mt-3 mb-1">è¨‚å–®æˆç«‹æ™‚é–“ï¼š2021-01-12 03:37:01</p>
      <p class="mb-1">é¤é»æ•¸ï¼š 1</p>
      <p class="mb-1">ä»˜æ¬¾ç‹€æ…‹ï¼šæœªä»˜æ¬¾</p>
      <p class="text-end mt-auto">å…± NT$ 70 å…ƒ</p>
    </div>
  </div> -->
</div>

<script>
const App = {
  data() {
    return {
      iceType: ['æ­£å¸¸å†°', 'å°‘å†°', 'å¾®å†°', 'å»å†°', 'ç†±'],
      sugarType: ['å…¨ç³–', 'ä¸ƒåˆ†', 'åŠç³–', 'ä¸‰åˆ†', 'ç„¡ç³–'],
      toppingsType: ['çç ', 'ç²‰æ¢', 'å°ç²‰åœ“', 'æ¤°æœ', 'èŠ‹é ­'],
      products: [
        {
          name: 'çç é®®å¥¶èŒ¶',
          engName: 'Pearl Milk Tea',
          price: 60,
          defaults: {
            toppings: ['çç '],
            sugar: '',
            ice: '',
          }
        },
        {
          name: 'æ¤°æœé®®å¥¶èŒ¶',
          engName: 'Coconut Milk Tea',
          price: 60,
          defaults: {
            toppings: ['æ¤°æœ'],
            sugar: '',
            ice: '',
          }
        },
        {
          name: 'é®®å¥¶èŒ¶',
          engName: 'Milk Tea',
          price: 50,
          defaults: {
            toppings: [''],
            sugar: '',
            ice: '',
          }
        },
        {
          name: 'å¤æ„å†¬ç“œèŒ¶ (ç³–å›ºå®š)',
          engName: 'Winter Melon Drink',
          price: 30,
          defaults: {
            toppings: [''],
            sugar: 'å…¨ç³–',
            ice: '',
          }
        },
        {
          name: 'èœœé¦™ç´…èŒ¶',
          engName: 'Black Tea',
          price: 30,
          defaults: {
            toppings: [''],
            sugar: '',
            ice: '',
          }
        },
        {
          name: 'åŒ…ç¨®é’èŒ¶',
          engName: 'Black Tea',
          price: 35,
          defaults: {
            toppings: [''],
            sugar: '',
            ice: '',
          }
        },
        {
          name: 'æª¸æª¬çƒé¾',
          engName: 'Lemon Oolong Tea',
          price: 55,
          defaults: {
            toppings: [''],
            sugar: '',
            ice: '',
          }
        },
        {
          name: 'è–‘æ¯èŒ¶ (ç†±é£²)',
          engName: 'Ginger Tea',
          price: 55,
          defaults: {
            toppings: [''],
            sugar: '',
            ice: 'ç†±',
          }
        },
        {
          name: 'é’è‰èŒ¶',
          engName: 'Herbal Tea',
          price: 35,
          defaults: {
            toppings: [''],
            sugar: '',
            ice: '',
          }
        },
        {
          name: 'é‡‘æ¡”æª¸æª¬',
          engName: 'Kumquat Lemonade',
          price: 40,
          defaults: {
            toppings: [''],
            sugar: '',
            ice: '',
          }
        },
        {
          name: 'æŸ³æ¾„é’èŒ¶',
          engName: 'Orange Mountain Tea',
          price: 45,
          defaults: {
            toppings: [''],
            sugar: '',
            ice: '',
          }
        },
      ],
      // æš«å­˜æ‰€é¸
      temp: {},
      // è¨‚å–®
      orderList: [],
      // ç¸½é‡‘é¡
      orderTotal: 0,
      // é»‘è‰²å€å¡Š
      darkZone: true,
      // é¡¯ç¤ºè¨‚å–®åˆ—è¡¨
      hasOrder: false,
    }
  },
  methods: {
    // é¸æ“‡é£²å“
    selectDrinks(item) {
      // ç§»é™¤é»‘åº•
      this.darkZone = false;
      // é£²å“åç¨±
      this.temp.name = item.name;
      // é è¨­æ•¸é‡ç‚º1
      this.temp.number = 1;
      // åˆ¤æ–·æ˜¯å¦æœ‰å€¼ï¼Œæœ‰å€¼å°±å¡«å…¥ï¼Œç„¡å€¼å°±å¸¶å…¥é è¨­
      this.temp.ice = item.defaults.ice !== '' ? item.defaults.ice : 'æ­£å¸¸å†°';
      this.temp.sugar = item.defaults.sugar !== '' ? item.defaults.sugar : 'å…¨ç³–';
      this.temp.toppings = [];
      // é€™è£¡è™•ç†çš„ä¸å¤ªå¥½ï¼Œå°‡productè£¡çš„defaultå­˜å…¥tempä¸­ï¼Œæƒ³å•é‚„æœ‰å…¶ä»–è¾¦æ³•å—ï¼Ÿå¦å¤–ï¼Œç„¡æ³•ä½¿ç”¨this.temp.default.iceï¼ŒåŸå› ç‚ºä½•ï¼Ÿ
      this.temp.defaultIce = item.defaults.ice;
      this.temp.defaultSugar = item.defaults.sugar;
      this.temp.defaultToppings = item.defaults.toppings;
      this.temp.note = '';
      // é€™è£¡è™•ç†çš„ä¸å¤ªå¥½ï¼Œå°‡productè£¡çš„priceå­˜å…¥tempä¸­ï¼Œæƒ³å•é‚„æœ‰å…¶ä»–è¾¦æ³•å—ï¼Ÿ
      this.temp.price = item.price;
    },
    // å–æ¶ˆ
    cancelBtn() {
      // æ¸…ç©ºtemp
      this.temp = {};
      // åŠ å›é»‘åº•
      this.darkZone = true;
    },
    // åŠ å…¥
    submitBtn(product) {
      // é¡¯ç¤ºè¨‚å–®åˆ—è¡¨
      this.hasOrder = true;

      // é€™æ˜¯æˆ‘çš„æƒ³æ³•ï¼Œä½†æˆ‘ç„¡æ³•å°‡ä¹‹åŠ ç¸½èµ·ä¾†ï¼Œåªæœƒä¸æ–·è¢«å–ä»£
      // this.orderList = [
      //   {
      //     name : product.name,
      //     note : product.note.join(' '),
      //     ice : product.ice,
      //     sugar : product.sugar,
      //     toppings : product.toppings.join('ã€'),
      //     price : product.price + product.toppings.length*10,
      //     number : product.number,
      //     sum : (product.price + product.toppings.length*10) * product.number, 
      //   }
      // ]
      
      // åˆ—å‡ºè¨‚å–®
      // æƒ³å•å•é€™è£¡æ˜¯å¦‚ä½•è§£é‡‹çš„ï¼Œæˆ‘ç†è§£çš„æ„æ€æ˜¯å°‡è¤‡è£½å‡ºä¾†çš„æ±è¥¿pushåˆ°orderListä¸­ï¼Œä½†é‚„æ˜¯ä¸ç†Ÿæ‚‰


      if(product.id){
        this.orderList.forEach((item, i) => {
          if(item.id == product.id) {
            this.orderList[i] = product
            this.orderList[i].toppings = product.toppings,
            this.orderList[i].salesPrice = product.price + (product.toppings.length * 10),
            this.orderList[i].number = product.number,
            this.orderList[i].sum = (product.price + (product.toppings.length * 10)) * product.number
          }
        });
      }
      else{
        this.orderList.push(Object.assign({}, {
          ...product,
          note: product.note,
          toppings: product.toppings,
          salesPrice: product.price + product.toppings.length*10,
          sum: (product.price + product.toppings.length*10) *  product.number,
          id: new Date().getTime(),
        }))
      }
      
      // è¨ˆç®—ç¸½é¡ï¼Œä¸çŸ¥é“æœ‰æ²’æœ‰æ›´å¥½çš„æ–¹å¼
      let count = 0
      this.orderList.forEach( item => {
        count += item.sum;
      });
      this.orderTotal = count;
      count = 0

      // æ¸…ç©ºtempã€åŠ å›é»‘åº•
      this.cancelBtn();
    },
    // åˆªé™¤
    deleteBtn(delItem) {
      // console.log(delItem);
      this.orderList = this.orderList.filter(item => item !== delItem);
      // ç¸½é¡æ‰£æ‰è¢«åˆªé™¤çš„
      this.orderTotal = this.orderTotal - delItem.sum;
      // åˆªé™¤æœ€å¾Œä¸€ç­†ï¼Œå‰‡éš±è—è¨‚å–®åˆ—è¡¨
      if(this.orderList == 0){
        this.hasOrder = false;
      }
      // æ¸…ç©ºtempã€åŠ å›é»‘åº•
      this.cancelBtn();
    },
    // ä¿®æ”¹
    modifyBtn(modifyItem) {
      this.darkZone = false;
      this.temp = {...modifyItem};
      // this.temp.toppings = modifyItem.toppings;
      
    }
  },
};

Vue.createApp(App).mount('#app');
</script>
<!-- ğŸ™‡ğŸ™‡ç·´ç¿’çµæŸğŸ™‡ğŸ™‡ -->
</main>
  
    
    
  </div>
</div>


<footer class="footer py-2 bg-light">
  <div class="container text-center">
    <small class="text-black-50 fw-light mb-0">å…­è§’å­¸é™¢ Vue èª²ç¨‹å°ˆå±¬æ–‡ä»¶</small>
  </div>
</footer>
<link rel="stylesheet" href="/stylesheets/all.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
</body>
</html>
